<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二叉树的 Morris 遍历</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="manifest" href="/blog/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="">
    <meta property="og:url" content="/blog/Algorithms/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%20Morris%20%E9%81%8D%E5%8E%86.html">
    <meta property="og:title" content="二叉树的 Morris 遍历">
    <meta property="og:description" content="二叉树的 Morris 遍历 " 转载自：Morris Traversal方法遍历二叉树（非递归，不用栈，O(1)空间），有所修改。" Morris 遍历是由 Joseph Morris 于1979年发明的，这种遍历方法与递归以及非递归遍历方法相比，其时间复杂度为 O(n)，而空间复杂度只要 O(1)。在某些场合下，其空间复杂度为常数的特性非常有用，因此我们">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/blog/assets/css/0.styles.8b5d14a7.css" as="style"><link rel="preload" href="/blog/assets/js/app.120ddba4.js" as="script"><link rel="preload" href="/blog/assets/js/vendors~layout-Layout.209c0354.js" as="script"><link rel="preload" href="/blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.7eb8d02d.js" as="script"><link rel="preload" href="/blog/assets/js/page-二叉树的Morris遍历.bf43d66a.js" as="script"><link rel="preload" href="/blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.fd9b9e80.js" as="script"><link rel="prefetch" href="/blog/assets/js/57.6a3c2500.js"><link rel="prefetch" href="/blog/assets/js/layout-Blog.a4cf1303.js"><link rel="prefetch" href="/blog/assets/js/layout-Layout.f3e9cb51.js"><link rel="prefetch" href="/blog/assets/js/layout-NotFound.4f30cc8f.js"><link rel="prefetch" href="/blog/assets/js/layout-Slide.a59c0f9f.js"><link rel="prefetch" href="/blog/assets/js/page-Aspects源码分析.46df36dc.js"><link rel="prefetch" href="/blog/assets/js/page-EasyTuple源代码分析.5a028ed7.js"><link rel="prefetch" href="/blog/assets/js/page-Hello!.8bd6f2a7.js"><link rel="prefetch" href="/blog/assets/js/page-Home.26b84a0b.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-100-SameTree及572-SubtreeofAnotherTree.377de91c.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-101-SymmetricTree.e101aff4.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-112-PathSum.55140f11.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-113-PathSumⅡ.834cba95.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-120-Triangle.d7f211b4.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-191-Numberof1Bits.85832ca1.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-198-HouseRobber.45404347.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-2-AddTwoNumbers.7112b7fd.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-21-MergeTwoSortedLists.ed4d9942.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-234-PalindromeLinkedList.99393483.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-238-ProductofArrayExceptSelf.77498a7f.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-28-ImplementstrStr().fbca4d4e.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-347-TopKFrequentElements.705e2583.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-437-PathSumⅢ.f0ad4f8f.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-48-RotateImage.c05e2370.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-494-TargetSum.cf82631c.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-62-UniquePaths.edae8b29.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode-63-UniquePathsⅡ.c5329281.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode.453ec4f4.js"><link rel="prefetch" href="/blog/assets/js/page-LeetCode上几道经典的排列组合题.a083c017.js"><link rel="prefetch" href="/blog/assets/js/page-Masonry源代码剖析.a0bf9e9e.js"><link rel="prefetch" href="/blog/assets/js/page-SDWebImage源代码剖析-多线程策略.86c13d58.js"><link rel="prefetch" href="/blog/assets/js/page-SDWebImage源代码剖析-缓存策略.7637973d.js"><link rel="prefetch" href="/blog/assets/js/page-SDWebImage源代码剖析-网络部分.775be273.js"><link rel="prefetch" href="/blog/assets/js/page-不重复打印排序数组中相加和为给定值的所有二元组三元组.09ba4aaa.js"><link rel="prefetch" href="/blog/assets/js/page-前中后序遍历的非递归实现.0c5859ed.js"><link rel="prefetch" href="/blog/assets/js/page-单链表问题总结.42806b40.js"><link rel="prefetch" href="/blog/assets/js/page-在其他数字都出现K次的数组中找到只出现M次的数字.6c67aefc.js"><link rel="prefetch" href="/blog/assets/js/page-在数组中找到出现次数大于NK的数.cae79074.js"><link rel="prefetch" href="/blog/assets/js/page-按层打印二叉树.ee22442e.js"><link rel="prefetch" href="/blog/assets/js/page-揭开Runtime的神秘面纱.9c5a4f3b.js"><link rel="prefetch" href="/blog/assets/js/page-数根.f5076b55.js"><link rel="prefetch" href="/blog/assets/js/page-最大公约数和最小公倍数.c5cd72f3.js"><link rel="prefetch" href="/blog/assets/js/page-最大子序列和问题.791a78cd.js"><link rel="prefetch" href="/blog/assets/js/page-源码分析.3bb05b64.js"><link rel="prefetch" href="/blog/assets/js/page-独木舟上的旅行.54d7d5a1.js"><link rel="prefetch" href="/blog/assets/js/page-由前序和中序遍历恢复二叉树结构.7e767e4a.js"><link rel="prefetch" href="/blog/assets/js/page-背包问题.02f5df41.js"><link rel="prefetch" href="/blog/assets/js/page-调整数组中元素的顺序.2ffe5b1f.js"><link rel="prefetch" href="/blog/assets/js/page-转圈打印矩阵.00a61bbc.js"><link rel="prefetch" href="/blog/assets/js/page-递归在二叉树相关题目中的应用.bda4daae.js"><link rel="prefetch" href="/blog/assets/js/page-需要排序的最短子数组的长度.6fa88377.js"><link rel="prefetch" href="/blog/assets/js/vendors~photo-swipe.54f2f5bc.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8b5d14a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/blog/" class="home-link router-link-active"></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active"><!---->
  Home
</a></div><div class="nav-item"><a href="/blog/iOS/" class="nav-link"><!---->
  iOS
</a></div><div class="nav-item"><a href="/blog/Algorithms/" class="nav-link router-link-active active"><!---->
  Algorithms
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/tamarous/blog" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active"><!---->
  Home
</a></div><div class="nav-item"><a href="/blog/iOS/" class="nav-link"><!---->
  iOS
</a></div><div class="nav-item"><a href="/blog/Algorithms/" class="nav-link router-link-active active"><!---->
  Algorithms
</a></div> <a rel="noopener noreferrer" href="https://github.com/tamarous/blog" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/blog/iOS/" class="sidebar-link">源码分析</a></li><li><a href="/blog/Algorithms/" aria-current="page" class="sidebar-link">LeetCode</a></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/blog/Algorithms/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">LeetCode</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/blog/Algorithms/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%20Morris%20%E9%81%8D%E5%8E%86/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">二叉树的 Morris 遍历</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">二叉树的 Morris 遍历</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-8-29</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 8 min</span> <meta property="timeRequired" content="PT8M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/blog/Algorithms/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%20Morris%20%E9%81%8D%E5%8E%86/#中序遍历" class="anchor-link heading2"><div>中序遍历</div></a></li><li class="anchor"><a href="/blog/Algorithms/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%20Morris%20%E9%81%8D%E5%8E%86/#前序遍历" class="anchor-link heading2"><div>前序遍历</div></a></li><li class="anchor"><a href="/blog/Algorithms/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%20Morris%20%E9%81%8D%E5%8E%86/#后序遍历" class="anchor-link heading2"><div>后序遍历</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="二叉树的-morris-遍历"><a href="#二叉树的-morris-遍历" class="header-anchor">#</a> 二叉树的 Morris 遍历</h1> <blockquote><p>转载自：<a href="https://www.cnblogs.com/AnnieKim/archive/2013/06/15/MorrisTraversal.html" target="_blank" rel="noopener noreferrer">Morris Traversal方法遍历二叉树（非递归，不用栈，O(1)空间）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，有所修改。</p></blockquote> <p>Morris 遍历是由 Joseph Morris 于1979年发明的，这种遍历方法与递归以及非递归遍历方法相比，其时间复杂度为 O(n)，而空间复杂度只要 O(1)。在某些场合下，其空间复杂度为常数的特性非常有用，因此我们有必要了解和掌握它是如何实现的。</p> <h2 id="中序遍历"><a href="#中序遍历" class="header-anchor">#</a> 中序遍历</h2> <p>过程：</p> <ol><li>如果当前节点的左孩子为空，则输出当前节点并将当前节点更新为它的右孩子。</li> <li>如果当前节点的左孩子不为空，在当前节点的左子树中找到它的最右节点。</li> <li>(a) 如果最右节点的右孩子为空，将它的右孩子设置为当前节点，而当前节点更新为当前节点的左孩子。(b) 如果最右节点的右孩子为当前节点，那么将最右节点的右孩子设置为 NULL，输出当前节点，当前节点更新为当前节点的右孩子。</li> <li>重复上述过程，直到当前节点为 NULL。</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Solution {
public:
    void MorrisInOrder(TreeNode *root) {
        TreeNode *cur = head, *prev = NULL;
        while(cur != NULL) {
            if (cur-&gt;left == NULL) { // 1
                printf(&quot;%d &quot;,cur-&gt;val);
                cur = cur-&gt;right;
            } else {
                prev = cur-&gt;left;
                // 2
                while(prev-&gt;right != NULL &amp;&amp; prev-&gt;right != cur) {
                    prev = prev-&gt;right;
                }
                if (prev-&gt;right == NULL) { // 3.a
                    prev-&gt;right = cur;
                    cur = cur-&gt;left;
                } else {
                    prev-&gt;right = NULL;   // 3.b
                    printf(&quot;%d &quot;,cur-&gt;val);
                    cur = cur-&gt;right;
                }
            }
        }
    }
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>借用下<a href="http://www.cnblogs.com/anniekim/archive/2013/06/15/morristraversal.html" target="_blank" rel="noopener noreferrer">这篇博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的图片：</p> <p><img src="http://images.cnitblog.com/blog/300640/201306/14214057-7cc645706e7741e3b5ed62b320000354.jpg" alt="Morris InOrder"></p> <p>我们来看下以这幅图中的树为例，对其进行 Morris 中序遍历的过程。</p> <ol><li>cur = 6，左孩子不为空所以进入步骤2，cur 的左子树的最右节点是5，5的右孩子为空，所以让5的右孩子指向6，然后让 cur = 2。</li> <li>cur = 2，左孩子不为空进入步骤2，2的最右节点为1，1的右孩子为空，所以把1的右孩子设置为2，然后让 cur = 1。</li> <li>cur = 1，1的左孩子为空，所以进入步骤1，输出1，其右孩子为2，所以重新让 cur = 2。</li> <li>2的最右节点是1，而1的右孩子为2，所以将1的右孩子重新设置为空，然后输出2，让 cur = 4。</li> <li>cur = 4，左孩子不为空进入步骤2，4的最右节点为3，3的右孩子为空，所以把3的右孩子设置为4，然后让 cur = 3。</li> <li>cur = 3，左孩子为空，所以进入步骤1，输出3，由于3的右孩子为4，所以重新让 cur = 4。</li> <li>cur = 4，最右节点为3，3的右孩子为4，所以将3的节点重新设为空，然后输出4，让 cur = 5。</li> <li>cur = 5，左孩子为空，所以输出5，5的右孩子为6，因此让 cur = 6。</li></ol> <p>经历了以上几步，这棵树的左子树已经全部遍历完了。右子树的遍历和左子树是类似的，结合图片和上述过程应该比较容易理解了，就不在解释了。</p> <h2 id="前序遍历"><a href="#前序遍历" class="header-anchor">#</a> 前序遍历</h2> <p>前序遍历和中序遍历的过程基本一样，唯一的不同点在于打印的位置不同。过程：</p> <ol><li>如果当前节点的左节点为空，那么输出当前节点并将当前节点更新为它的右孩子。</li> <li>如果当前节点的左节点不为空，在当前节点的左子树中找到它的最右节点。</li> <li>(a) 如果最右节点的右孩子为空，将它的右孩子设置为当前节点。<strong>输出当前节点(与中序遍历唯一的不同点)</strong>，将当前节点更新为当前节点的左孩子。(b) 如果最右节点的右孩子为当前节点，那么将它的右孩子重新设置为空，然后将当前节点更新为当前节点的右孩子。</li> <li>重复上述过程，直到当前节点为 NULL。</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Solution {
public:
    void MorrisPreOrder(TreeNode *root) {
        TreeNode *cur = head, *prev = NULL;
        while(cur != NULL) {
            if (cur-&gt;left == NULL) { // 1
                printf(&quot;%d &quot;,cur-&gt;val);
                cur = cur-&gt;right;
            } else {
                prev = cur-&gt;left;
                
                while(prev-&gt;right != NULL &amp;&amp; prev-&gt;right != cur) { // 2
                    prev = prev-&gt;right;
                }
                if (prev-&gt;right == NULL) { // 3.a
                    prev-&gt;right = cur;
                    printf(&quot;%d &quot;,cur-&gt;val);
                    cur = cur-&gt;left;
                } else {
                    prev-&gt;right = NULL;   // 3.b
                    cur = cur-&gt;right;
                }
            }
        }
    }
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><img src="http://images.cnitblog.com/blog/300640/201306/14221458-aa5f9e92cce743ccacbc735048133058.jpg" alt="Morris PreOrder"></p> <h2 id="后序遍历"><a href="#后序遍历" class="header-anchor">#</a> 后序遍历</h2> <p>后续遍历又是最为复杂的一个。我们需要建立一个额外节点 dummy，然后将根节点设置为dummy 的左孩子。过程：</p> <ol><li>建立一个额外节点 dummy，然后将根节点设置为 dummy 的左孩子。</li> <li>如果当前节点的左孩子为空，则将其右孩子作为当前节点。</li> <li>如果当前节点的左孩子不为空，在当前节点的左子树中找到它的最右节点。</li> <li>(a) 如果最右节点的右孩子为空，则将最右节点的右孩子设置为当前节点，而当前节点更新为当前节点的左孩子。(b) 如果最右节点的右孩子为当前节点，将它的右孩子重新设为空。<strong>倒序输出从当前节点的左孩子到该最右节点路径上的所有节点</strong>，然后将当前节点更新为当前节点的右孩子。</li> <li>重复以上过程，直到当前节点为NULL。</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Solution {
public:
    void MorrisPostOrder(TreeNode *root) {
        TreeNode *dummy = new TreeNode(0);
        dummy-&gt;left = root;
        TreeNode *cur = dummy, *prev = NULL;
        while(cur != NULL) {
            if (cur-&gt;left == NULL) {
                cur = cur-&gt;right;
            } else {
                prev = cur-&gt;left;
                
                while(prev-&gt;right != NULL &amp;&amp; prev-&gt;right != cur) { 
                    prev = prev-&gt;right;
                }
                if (prev-&gt;right == NULL) { 
                    prev-&gt;right = cur;
                    cur = cur-&gt;left;
                } else {
                    printReverse(cur-&gt;left, prev);
                    prev-&gt;right = NULL;
                    cur = cur-&gt;right;
                }
            }
        }
    }
    
    void reverse(TreeNode *from, TreeNode *to) {
        if (from == to) {
            return;
        }
        TreeNode *x = from, *y = from-&gt;right, *z;
        while (true) {
            z = y-&gt;right;
            y-&gt;right = x;
            x = y;
            y = z;
            if (x == to)
                break;
        }
    }

    void printReverse(TreeNode* from, TreeNode *to) {
        reverse(from, to);
        
        TreeNode *p = to;
        while (true) {
            printf(&quot;%d &quot;, p-&gt;val);
            if (p == from)
                break;
            p = p-&gt;right;
        }
        
        reverse(to, from);
    }
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p><img src="http://images.cnitblog.com/blog/300640/201306/15165951-7991525829134fb3beefed9fbf7e0536.jpg" alt="Morris PostOrder"></p> <p>下面以图中的树为例，分析下 Morris 后序遍历的过程。</p> <ol><li>新建一个额外节点0，将它设为当前节点，然后将根节点9设置为它的左孩子。</li> <li>cur = 0，它的左孩子不为空，在0的左子树中寻找最右节点，为7。</li> <li>因为7的右孩子为空，所以将7的右孩子设置为当前节点0，然后将当前节点0更新为0的左孩子9。</li> <li>cur = 9，由于9的左孩子不为空，因此在9的左子树中寻找它的最右节点，为3。</li> <li>因为3的右孩子为空，所以将3的右孩子设置为当前节点9，然后将当前节点9更新为9的左孩子5。</li> <li>cur = 5，它的左孩子不为空，在5的左子树中找到最右节点，为1。</li> <li>因为1的右孩子为空，所以把1的右孩子设置为当前节点5，然后将当前节点5更新为5的左孩子1。</li> <li>cur = 1，当前节点1的左孩子为空，所以将1的右孩子5设置为当前节点。</li> <li>cur = 5，它的左孩子不为空，在5的左子树中寻找最后节点，为1。</li> <li>因为1的右孩子为5，是当前节点，因此将1的右孩子重新设为空，然后倒序输出从5的左孩子1到1的节点，即输出1，然后将当前节点5更新为当前节点的右孩子4。</li> <li>当前节点4的左孩子不为空，因此在4的左子树中寻找最右节点，为2。</li> <li>2的右孩子为空，因此将2的右孩子设置为当前节点4，然后将当前节点设置为当前节点的左孩子2。</li> <li>cur = 2，因为当前节点的左孩子为空，所以将2的右孩子4设置为当前节点。</li> <li>cur = 4，由11的结果，它的最右节点为2。</li> <li>因为2的右孩子为4，是当前节点，因此将2的右孩子重新设置为空，然后倒序输出从4的左孩子2到2的节点，即输出2，然后将当前节点4更新为当前节点的右孩子3。</li> <li>cur = 3，因为当前节点的左孩子为空，因此将3的右孩子9设置为当前节点。</li> <li>cur = 9，因为9的左孩子不为空，所以在它的左子树中寻找它的最右节点，为3。</li> <li>因为3的右孩子9为当前节点，因此将3的右孩子重新设置为空，然后倒序输出从9的左孩子5到3的节点，即输出3、4、5。</li> <li>至此，9的左子树已经遍历输出完毕。后续遍历右子树的过程和遍历左子树基本一样，因此不再赘述。</li></ol></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/tamarous/blog/edit/master/docs/Algorithms/二叉树的 Morris 遍历.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">August 29, 2021 01:51</span></div> <!----></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/blog/assets/js/app.120ddba4.js" defer></script><script src="/blog/assets/js/vendors~layout-Layout.209c0354.js" defer></script><script src="/blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.7eb8d02d.js" defer></script><script src="/blog/assets/js/page-二叉树的Morris遍历.bf43d66a.js" defer></script><script src="/blog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.fd9b9e80.js" defer></script>
  </body>
</html>
